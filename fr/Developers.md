<h1><a class="anchor" id="developers" href="#developers"><i class="fa fa-link"></i></a>Les développeurs</h1><h2><a class="anchor" id="table-of-contents" href="#table-of-contents"><i class="fa fa-link"></i></a> Table des matières</h2><ul><li> <a href="#introduction">introduction</a></li><li> <a href="#dataset-integration">Intégration des ensembles de données</a></li><li> <a href="#add-your-datasets-on-gitlab">Ajoutez vos ensembles de données sur GitLab</a></li><li> <a href="#list-of-main-repositories">Liste des principaux référentiels</a></li><li> <a href="#how-to-contribute-code">Comment contribuer au code</a></li><li> <a href="#description-of-it-infrastructure">Description de l&#39;infrastructure informatique</a><ul><li> <a href="#description-of-it-infrastructure_run-with-docker">Exécuter avec Docker</a></li><li> <a href="#description-of-it-infrastructure_server-infrastructure">Infrastructure serveur</a><ul><li> <a href="#description-of-it-infrastructure_server-infrastructure_infrastructure">Infrastructure</a></li><li> <a href="#description-of-it-infrastructure_server-infrastructure_performance">Performance</a></li></ul></li></ul></li><li> <a href="#read-me">Read.ME</a></li><li> <a href="#how-to-define-indicators">Comment définir les indicateurs</a></li><li> <a href="#how-to-cite">Comment citer</a></li><li> <a href="#authors-and-reviewers">Auteurs et relecteurs</a></li><li> <a href="#license">Licence</a></li><li> <a href="#acknowledgement">Reconnaissance</a></li></ul><h2><a class="anchor" id="introduction" href="#introduction"><i class="fa fa-link"></i></a> introduction</h2><p> Cette page contient toutes les informations nécessaires aux développeurs pour contribuer à la plateforme Hotmaps ou pour comprendre son fonctionnement.</p><p> <a href="#table-of-contents"><strong><code>To Top</code></strong></a></p><h2><a class="anchor" id="dataset-integration" href="#dataset-integration"><i class="fa fa-link"></i></a> Intégration des ensembles de données</h2><p> L&#39;intégration de nouveaux ensembles de données publics est gérée comme suit:</p><ol><li> les ensembles de données doivent être poussés vers un référentiel git ( <a href="#add-your-datasets-on-gitlab">ajoutez vos ensembles de données sur GitLab</a> )</li><li> chaque nuit, un script intègre les ensembles de données nouveaux / mis à jour à la plateforme DEV</li><li> si tout a bien fonctionné, le jeu de données est désormais disponible sur la plateforme DEV et les développeurs peuvent l&#39;intégrer dans leur code</li><li> Une fois le codage terminé, les nouvelles fonctionnalités sont ajoutées à la plate-forme de production via une nouvelle version</li></ol><p> <strong>Intégration de données</strong></p><p> Si un ensemble de données échoue lors de l&#39;intégration, un problème est créé sur Taiga (plateforme de gestion de projet). Le problème montre l&#39;erreur soulevée et le développeur doit la corriger et pousser à nouveau son travail vers Git afin que le script puisse essayer de l&#39;intégrer à nouveau le soir suivant.</p><p> Le code source du script d&#39;intégration est disponible à ce lien: <a href="https://github.com/HotMaps/CI_DatasetIntegration">Intégration de données</a></p><p> <a href="#table-of-contents"><strong><code>To Top</code></strong></a></p><h2><a class="anchor" id="add-your-datasets-on-gitlab" href="#add-your-datasets-on-gitlab"><i class="fa fa-link"></i></a> Ajoutez vos ensembles de données sur GitLab</h2><p> Pour ajouter des ensembles de données à la liste des ensembles de données publics, ils doivent être poussés vers un nouveau référentiel Git sur GitLab. Voici l&#39;organisation GitLab dans laquelle les ensembles de données doivent être <a href="https://gitlab.com/hotmaps">transférés</a> : <a href="https://gitlab.com/hotmaps">Ensembles de données sur GitLab</a> .</p><p> Une fois par jour, les référentiels sont vérifiés pour de nouveaux commits et intégrés le cas échéant. Le processus d&#39;intégration vérifie si les données sont conformes ou non à la spécification.</p><p> Voici la spécification: <a href="https://wiki.hotmaps.eu/uploads/Hotmaps_Data-upload-on-Gitlab_2017-12-04_V4.pdf">Hotmaps_Data-upload-on-Gitlab_2017-12-04_V4.pdf</a></p><p> <a href="#table-of-contents"><strong><code>To Top</code></strong></a></p><h2><a class="anchor" id="list-of-main-repositories" href="#list-of-main-repositories"><i class="fa fa-link"></i></a> Liste des principaux référentiels</h2><p> Le code de l&#39;application se trouve sur GitHub sous l&#39; <a href="https://github.com/HotMaps">organisation Hotmaps</a> . Cette organisation possède plusieurs référentiels</p><ul><li> <a href="https://github.com/HotMaps/Hotmaps-toolbox-service">Hotmaps-toolbox-client</a> contient le frontend de notre application. C&#39;est un projet angulaire (JavaScript)</li><li> <a href="https://github.com/HotMaps/Hotmaps-toolbox-service">Hotmaps-toolbox-service</a> contient l&#39;API de notre application. Il est basé sur Flask (Python)</li><li> <a href="https://github.com/HotMaps/base_calculation_module">base-calcul-module</a> est le modèle de base que vous pouvez utiliser pour créer vos propres modules de calcul pour Hotmaps</li><li> une liste de modules de calculs</li></ul><p> <a href="#table-of-contents"><strong><code>To Top</code></strong></a></p><h2><a class="anchor" id="how-to-contribute-code" href="#how-to-contribute-code"><i class="fa fa-link"></i></a> Comment contribuer au code</h2><p> Si vous souhaitez ajouter du code à Hotmaps, vous avez deux possibilités: si vous souhaitez mettre à jour directement l&#39;interface ou le backend, vous devez modifier le référentiel client ou service de la boîte à outils. Si vous souhaitez ajouter votre propre module de calcul, vous pouvez créer votre propre référentiel en suivant <a href="https://github.com/HotMaps/base_calculation_module">le readme du référentiel base_calculation_module</a></p><p> Si vous souhaitez effectuer des travaux sur le référentiel Git, veuillez ne pas travailler directement avec la branche master. Créez une nouvelle branche à partir de la branche de développement, faites votre travail sur cette branche et lorsque votre fonctionnalité est testée, vous pouvez fusionner votre travail avec la branche de développement comme indiqué dans le graphique suivant.</p><p> <strong>Git_workflow</strong></p><p> Afin de pousser quelque chose vers un référentiel Hotmaps, vous devez être membre de l&#39;équipe Hotmaps, si vous ne l&#39;êtes pas, vous pouvez toujours effectuer une fourchette de notre outil pour développer votre propre outil.</p><p> Vous pouvez trouver plus d&#39;informations sur la façon de travailler dans ces documents:</p><ul><li> <a href="https://wiki.hotmaps.eu/uploads/Hotmaps_python_best_practices_tutorial_2017-08-07_v01.pdf">Hotmaps_python_best_practices_tutorial_2017-08-07_v01.pdf</a></li><li> <a href="https://wiki.hotmaps.eu/uploads/Hotmaps_Testing_in_python_tutorial_pytest_2017-08-07_v01.pdf">Hotmaps_Testing_in_python_tutorial_pytest_2017-08-07_v01.pdf</a></li><li> <a href="https://wiki.hotmaps.eu/uploads/GitFlow_Guidelines_CREM_2017-02-01.pdf">GitFlow_Guidelines_CREM_2017-02-01.pdf</a></li></ul><p> <a href="#table-of-contents"><strong><code>To Top</code></strong></a></p><h2><a class="anchor" id="description-of-it-infrastructure" href="#description-of-it-infrastructure"><i class="fa fa-link"></i></a> Description de l&#39;infrastructure informatique</h2><p> <strong>ReverseProxy_architecture_latest</strong></p><p> Tous les services et composants sont utilisés via leur propre conteneur Docker. Tous ces conteneurs sont définis dans un seul fichier docker-compose. L&#39;image ci-dessus représente l&#39;architecture informatique de Hotmaps.</p><p> Certaines organisations partenaires ont limité la communication au port 80 uniquement. Pour éviter les problèmes causés par cette limitation, la création d&#39;un proxy inverse a été effectuée. Ce proxy inverse offre un point d&#39;entrée unique puis distribue la requête envoyée par le client au service concerné. Le proxy inverse est composé de trois composants:</p><ol><li> Serveur proxy inverse: il sert de point d&#39;entrée unique et distribue les demandes aux bons services.</li><li> Proxy-gen: c&#39;est un service qui mappe automatiquement tous les services dans le proxy inverse. Ainsi, il n&#39;est pas nécessaire d&#39;ajouter manuellement un nouveau service à la configuration du proxy</li><li> lets-encrypt: c&#39;est un service qui permet l&#39;utilisation du protocole SSL. Il est nécessaire pour activer le protocole https. Les certificats SSL sont signés par une adresse e-mail configurée dans ce service.</li></ol><p> Trois réseaux existent:</p><ul><li> hotmaps_nginx permet au proxy inverse de communiquer avec l&#39;API, le frontend et le GeoServer. Il permet principalement de distribuer une demande au bon service parmi les trois.</li><li> hotmaps_backend permet la communication entre tous les composants du backend: API, frontend, GeoServer et la base de données PostgreSQL.</li><li> hotmaps_cm-net permet la communication entre chaque module de calcul et l&#39;API.</li></ul><p> Chaque module de calcul possède son propre conteneur Docker.</p><p> <a href="#table-of-contents"><strong><code>To Top</code></strong></a></p><h3><a class="anchor" id="run-with-docker" href="#run-with-docker"><i class="fa fa-link"></i></a> Exécuter avec Docker</h3><p> Hotmaps utilise le logiciel <a href="https://www.docker.com/">Docker</a> et l&#39;outil <a href="https://docs.docker.com/compose/">Docker-Compose</a> pour gérer les conteneurs. Un fichier docker-compose.yml contient toute la configuration de l&#39;architecture Docker (configuration des conteneurs, réseaux, liens, ...). Cela permet aux conteneurs d&#39;être exécutés avec une simple commande:</p><pre> <code class="language-shell">docker-compose up</code></pre><p> <em>Il y a plus d&#39;informations sur docker-compose sur le site Web de Docker: <a href="https://docs.docker.com/compose/reference/">référence de ligne de commande</a> <a href="https://docs.docker.com/compose/compose-file/">Compose</a> et <a href="https://docs.docker.com/compose/compose-file/">référence de fichier Compose</a> .</em></p><p> Il n&#39;y a qu&#39;un seul conteneur qui est exécuté séparément des autres: c&#39;est la base de données car elle doit rester active tout le temps. C&#39;est pourquoi ce n&#39;est pas dans le fichier de configuration docker-compose.</p><p> <a href="#table-of-contents"><strong><code>To Top</code></strong></a></p><h3><a class="anchor" id="server-infrastructure" href="#server-infrastructure"><i class="fa fa-link"></i></a> Infrastructure serveur</h3><h4><a class="anchor" id="infrastructure" href="#infrastructure"><i class="fa fa-link"></i></a> Infrastructure</h4><p> Pour le moment, le serveur est hébergé à la HES-SO en Suisse. Il y a 2 machines disponibles: une pour le développement (développement et test) et une pour la production (la boîte à outils proprement <a href="https://www.hotmaps.eu">dite</a> , disponible sur <a href="https://www.hotmaps.eu">www.hotmaps.eu</a> ).</p><p> Les deux machines ont les mêmes spécifications:</p><ul><li> Processeur: Intel Xeon E5-2680 v4 (8) à 2,4 GHz)</li><li> Mémoire RAM: 16 Go</li><li> Disque dur: 500 Go</li><li> Système d&#39;exploitation: Ubutnu 16.04 LTS</li></ul><h4><a class="anchor" id="performance" href="#performance"><i class="fa fa-link"></i></a> Performance</h4><p> Nous effectuons fréquemment des tests de performances sur le serveur de développement afin de garantir un certain nombre d&#39;utilisateurs simultanés.</p><p> À titre d&#39;exemple, voici les résultats de la première version bêta par rapport aux tests de versions futures. La nouvelle version inclut des améliorations de performances.</p><p> <em>Cet exemple montre les tests de performance des utilisateurs simultanés utilisant la même fonction: &quot;courbe de durée pour la sélection d&#39;hectares&quot;. La ligne en gras indique la limite à laquelle le serveur commence à générer des erreurs. La sélection d&#39;hectare est un bon exemple car elle montre les requêtes qui nécessitent le plus de ressources.</em></p><p> <strong>Sortie bêta de mars 2019</strong></p><p> | Nb d&#39;utilisateurs simulés | Temps moyen | Médiane | Temps max | Temps min | Pourcentage d&#39;erreurs | | --------------------- | ------------ | ------ | -------- | -------- | -------------------- | | 1 | 1042 | 1042 | 1042 | 1042 | 0 | | 20 | 3608 | 3858 | 4475 | 2156 | 0 | | 50 | 7337 | 7595 | 11791 | 1568 | 0 | | 100 | 13897 | 13644 | 24492 | 1875 | 0 | | 200 | 27135 | 26380 | 51967 | 3045 | 0 | | <strong>300</strong> | 41237 | 43083 | 73245 | 3223 | <strong>10,67</strong> |</p><p> <strong>Version finale (août 2020)</strong></p><p> | Nb d&#39;utilisateurs simulés | Temps moyen | Médiane | Temps max | Temps min | Pourcentage d&#39;erreurs | | --------------------- | ------------ | ------ | -------- | -------- | -------------------- | | 1 | 1025 | 970 | 1151 | 956 | 0 | | 20 | 1671 | 1732 | 2085 | 1113 | 0 | | 50 | 3527 | 3622 | 5593 | 982 | 0 | | 100 | 6648 | 6764 | 11854 | 1118 | 0 | | 200 | 12904 | 12801 | 24163 | 1192 | 0 | | 300 | 19521 | 19382 | 38116 | 1060 | 0 |</p><p> <a href="#table-of-contents"><strong><code>To Top</code></strong></a></p><h2><a class="anchor" id="read.me" href="#read.me"><i class="fa fa-link"></i></a> LISEZ-MOI</h2><p> <a href="Read.ME">Read.ME</a></p><p> <a href="#table-of-contents"><strong><code>To Top</code></strong></a></p><h2><a class="anchor" id="how-to-define-indicators" href="#how-to-define-indicators"><i class="fa fa-link"></i></a> Comment définir les indicateurs</h2><p> <a href="Guidelines-for-defining-indicators">Définition de l&#39;indicateur</a></p><p> <a href="#table-of-contents"><strong><code>To Top</code></strong></a></p><h2><a class="anchor" id="how-to-cite" href="#how-to-cite"><i class="fa fa-link"></i></a> Comment citer</h2><p> Daniel Hunacek, Lucien Zuber, Matthieu Dayer, dans Hotmaps Wiki, Section développeurs (septembre 2020)</p><p> <a href="#table-of-contents"><strong><code>To Top</code></strong></a></p><h2><a class="anchor" id="authors-and-reviewers" href="#authors-and-reviewers"><i class="fa fa-link"></i></a> Auteurs et relecteurs</h2><p> Cette page a été rédigée par Daniel Hunacek, Lucien Zuber et Matthieu Dayer ( <strong><a href="https://www.hevs.ch">HES-SO</a></strong> ).</p><p> ☑ Cette page a été révisée par Mostafa Fallahnejad ( <strong><a href="https://eeg.tuwien.ac.at/">EEG - TU Wien</a></strong> ).</p><p> <a href="#table-of-contents"><strong><code>To Top</code></strong></a></p><h2><a class="anchor" id="license" href="#license"><i class="fa fa-link"></i></a> Licence</h2><p> Copyright © 2016-2020: Daniel Hunacek, Lucien Zuber et Matthieu Dayer</p><p> Licence internationale Creative Commons Attribution 4.0</p><p> Ce travail est concédé sous une licence internationale Creative Commons CC BY 4.0.</p><p> Identificateur de licence SPDX: CC-BY-4.0</p><p> Texte de la licence: https://spdx.org/licenses/CC-BY-4.0.html</p><p> <a href="#table-of-contents"><strong><code>To Top</code></strong></a></p><h2><a class="anchor" id="acknowledgement" href="#acknowledgement"><i class="fa fa-link"></i></a> Reconnaissance</h2><p> Nous tenons à exprimer notre profonde gratitude au projet Horizon 2020 <a href="https://www.hotmaps-project.eu">Hotmaps</a> (accord de subvention numéro 723677), qui a fourni le financement pour mener à bien la présente enquête.</p><p> <a href="#table-of-contents"><strong><code>To Top</code></strong></a></p>
<!--- THIS IS A SUPER UNIQUE IDENTIFIER -->

This page was automatically translated. View in another language:

[English](../en/Developers) (original) [Bulgarian](../bg/Developers)<sup>\*</sup> [Czech](../cs/Developers)<sup>\*</sup> [Danish](../da/Developers)<sup>\*</sup> [German](../de/Developers)<sup>\*</sup> [Greek](../el/Developers)<sup>\*</sup> [Spanish](../es/Developers)<sup>\*</sup> [Estonian](../et/Developers)<sup>\*</sup> [Finnish](../fi/Developers)<sup>\*</sup>  [Irish](../ga/Developers)<sup>\*</sup> [Croatian](../hr/Developers)<sup>\*</sup> [Hungarian](../hu/Developers)<sup>\*</sup> [Italian](../it/Developers)<sup>\*</sup> [Lithuanian](../lt/Developers)<sup>\*</sup> [Latvian](../lv/Developers)<sup>\*</sup> [Maltese](../mt/Developers)<sup>\*</sup> [Dutch](../nl/Developers)<sup>\*</sup> [Polish](../pl/Developers)<sup>\*</sup> [Portuguese (Portugal, Brazil)](../pt/Developers)<sup>\*</sup> [Romanian](../ro/Developers)<sup>\*</sup> [Slovak](../sk/Developers)<sup>\*</sup> [Slovenian](../sl/Developers)<sup>\*</sup> [Swedish](../sv/Developers)<sup>\*</sup> 

<sup>\*</sup> machine translated
